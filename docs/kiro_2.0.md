# Kiro 2.0 명세서

Kiro는 **의미 있는 기록**을 위한, **구조와 스타일의 명시성**을 극대화한 문서 작성 언어입니다.

---

### 📌 Kiro의 핵심 원칙

1.  **가독성 우선**: 문서 원문을 읽는 것만으로도 내용의 구조와 의미를 명확하게 파악할 수 있어야 합니다.
2.  **명시적 선언**: 스타일과 리소스는 반드시 정해진 문법으로 명시적으로 선언하고 사용합니다. 파서는 파일 확장자나 문맥에 따라 기능을 추론하지 않습니다.
3.  **구조와 표현의 분리**: Kiro는 문서의 구조를 정의하는 데 집중하며, 최종적인 시각적 표현(테마, 디자인)은 사용자 정의에 맡기는 것을 원칙으로 합니다.
4.  **선택적 마크다운 호환**: 가독성을 해치지 않는 대부분의 기본 마크다운 문법(굵게, 헤딩 등)은 그대로 지원합니다. 단, Kiro의 철학과 충돌하는 링크, 이미지, 인용, 리스트 규칙은 Kiro 전용 문법으로 대체합니다.
5.  **단순한 스타일 규칙**: 스타일은 중첩을 허용하지 않으며, 새로운 스타일이 시작되면 이전 스타일은 자동으로 종료됩니다.
6.  **공백의 의미**: 리스트 들여쓰기 등 문법적 의미를 갖는 경우를 제외하고, 연속된 개행 등의 공백은 레이아웃의 일부로 존중합니다.

---

### 🖋️ 스타일 시스템

#### 🔹 스타일 선언: `<style>` 블록

문서의 어느 곳에든 `<style>` 블록을 두어 스타일을 정의할 수 있습니다.

* **기본 문법**: `[스타일명] = [속성1] [속성2] ...`
* **스타일명 규칙**:
    * 한글, 영문, 숫자, `_` 사용 가능
    * 대소문자 구분 없음
    * `:`를 통해 **1단계**의 하위 스타일 상속이 가능 (예: `[card:dark]`)
* **속성 키워드**:
    | 문법 | 의미 | 예시 |
    | :--- | :--- | :--- |
    | `[#색상]` | 텍스트 색상 지정 | `[#222]`, `[#ff0000]` |
    | `[=폰트명]` | 글꼴 지정 | `[=Pretendard]` |
    | `[$tailwind]` | Tailwind CSS 클래스 지정 | `[$text-lg]`, `[$p-4]` |

#### 🔹 스타일 적용

* **문법**: `[스타일명]...<>`
* **예시**: `[tip]이것은 팁입니다.<>`
* **엣지케이스**:
    * **정의되지 않은 스타일**: `[undefined]...<>` 사용 시, 파서는 이를 스타일로 인식하지 않고 원본 텍스트 `[undefined]...<>`를 그대로 출력합니다.
    * **종료 태그 누락**: `<>`가 없는 경우, 해당 문단(혹은 블록)의 끝까지 스타일이 적용됩니다.

#### 🔹 전역 스타일: `[!global]`

* `<style>` 블록 내에서 `[!global]`로 선언하며, 스타일이 지정되지 않은 모든 텍스트의 기본값을 설정합니다.
* **적용 가능 속성**: 텍스트 색상, 글꼴, Tailwind 클래스만 가능합니다.

---

### 📚 리스트 시스템 (Hybrid)

Kiro는 **보고서형 리스트**와 **표준 리스트** 두 가지를 명확히 구분하여 사용합니다.

#### 🔹 1. 보고서형 리스트 (Kiro List)

순서와 계층이 명확한 정형화된 목록을 위해 사용합니다.

* **문법**: `-` 기호 바로 뒤에 **공백 없이** 계층 키를 붙여 사용합니다.
    * **예시**: `-1.`, `-1.A.`, `-ㄱ.1.`
* **계층**: 들여쓰기는 무시하며, 오직 키의 `.` 개수로만 계층을 판단합니다.
* **순서**: 파서는 키의 순서(1 다음에 2가 오는지 등)를 강제하지 않으며, 사용자가 입력한 키를 100% 신뢰합니다.

#### 🔹 2. 표준 리스트 (Standard List)

순서가 중요하지 않은 단순 나열을 위해 사용합니다.

* **문법**: `-`, `*`, `+` 기호 뒤에 **반드시 공백**을 두고 내용을 작성합니다.
* **계층**: 들여쓰기(Indentation)로 계층을 구분합니다. (Kiro 파서는 `스페이스 2칸`을 1레벨로 통일하는 것을 권장)

* **엣지케이스 (파서 구분 로직)**:
    * `-` 뒤에 **공백이 없으면** "보고서형 리스트"로 인식합니다.
    * `-` 뒤에 **공백이 있으면** "표준 리스트"로 인식합니다.

---

### 🌐 외부 리소스

* **문법**: `@[타입]: URL (설명)`
* **타입**: `img`, `video`, `audio`, `link`를 명시적으로 지원합니다.
* **식별자**: 웹 URL 또는 로컬 파일 경로를 사용합니다.
* **설명**: 소괄호 `()` 안에 설명을 작성하며, `alt`, `figcaption` 등으로 활용됩니다. 설명은 생략 가능합니다.
* **중요**: 기존 마크다운의 링크`[]()` 및 이미지`![]()` 문법은 **사용하지 않습니다.**

---

### 💬 각주, 인용, 토글

* **각주 (Footnote)**
    * **참조**: `[^식별자]`
    * **내용**: `[^식별자]: 내용` 형식으로 문서 아무 곳에나 정의합니다.
* **인용 (Blockquote)**
    * **문법**: `|` 기호로 시작합니다.
    * 마크다운의 `>`는 인용으로 사용하지 않습니다.
* **토글 (Toggle Details)**
    * **문법**: `>` 기호로 시작하며, `>>`, `>>>`로 계층을 표현합니다.
    * 헤딩과 결합하여(`### > 제목`) `<summary>` 태그를 만들 수 있습니다.

---

### ✅ 마크다운 호환성 요약

| 기능 | Kiro에서의 상태 | 비고 |
| :--- | :--- | :--- |
| 헤딩, 굵게, 기울임, 인라인/코드블록, 구분선 | ✅ **유지** | 표준 마크다운과 동일하게 작동 |
| 링크 / 이미지 | ❌ **대체** | `@link`, `@img` 전용 문법 사용 |
| 리스트 | ⚠️ **하이브리드** | Kiro 리스트(`-1.A.`)와 표준 리스트(`- item`) 공존 |
| 인용 | ❌ **대체** | `\|` 문법 사용. `>`는 토글 기능으로 변경 |

---

### 🎨 렌더링 전략

* **결과물**: 렌더러는 **HTML 파일**과 **CSS 파일** 두 개를 생성하는 것을 원칙으로 합니다.
* **스타일 적용**: 스타일은 HTML 태그에 인라인(`style="..."`)으로 붙이지 않고, **CSS 클래스**로 적용하여 분리합니다.
* **CSS 생성**: 문서 내 `<style>` 블록에 정의된 내용은 `.kiro-[스타일명]` 형태의 CSS 클래스로 자동 생성되어 `.css` 파일에 포함됩니다.

---

### ⛓️ 이스케이프 (Escape)

Kiro 문법에 사용되는 특수 문자(`*`, `_`, `#`, `[`, `]` 등)를 문법적 기능 없이 일반 문자로 출력하고 싶을 때는, 해당 문자 앞에 백슬래시(`\`)를 사용합니다.

*   예시: `\*이것은 볼드체가 아닙니다\*`
*   결과: `*이것은 볼드체가 아닙니다*`

```
